<!doctype HTML>

<style>
#container {
  width: 200px;
  height: 50px;
  contain: style layout;
  background: lightblue;
}
</style>

<script>
async function updateLockable() {
  let element = document.createElement("div");
  
  // Construct the element.
  element.id = "container";
  element.innerHTML = "Lorem ipsum."

  element.renderSubtree = "invisible";

  // Attach the element.
  document.body.appendChild(element);

  // Update, which does co-operative updates. After that finishes, commit.
  element.updateRendering && element.updateRendering().then(
    () => { element.renderSubtree = ""; });
}

window.onload = updateLockable;
</script>

