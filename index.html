<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>CSS Display Locking</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="exploring" name="csswg-work-status">
  <meta content="UD" name="w3c-status">
  <meta content="This spec introduces features for &quot;display locking&quot;,  	allowing authors to more easily control when rendering work occurs,  	making large amounts of content more performant." name="abstract">
  <link href="../default.css" rel="stylesheet" type="text/css">
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-UD" rel="stylesheet" type="text/css">
  <meta content="Bikeshed version 8bc2fccb49a45a0af18c5e75ce18049d75f824b6" name="generator">
  <link href="https://tabatkins.github.io/specs/css-display-locking" rel="canonical">
  <meta content="7ba6674f8c64ec757433bee7cc1ab70d201cdbc2" name="document-revision">
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-dfn-panel */

.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: #DDDDDD;
    color: black;
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-syntax-highlighting */

.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">CSS Display Locking</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Unofficial Proposal Draft, <time class="dt-updated" datetime="2020-01-31">31 January 2020</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://tabatkins.github.io/specs/css-display-locking">https://tabatkins.github.io/specs/css-display-locking</a>
     <dt>Issue Tracking:
     <dd><a href="#issues-index">Inline In Spec</a>
     <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-display-locking-1">GitHub Issues</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Tab Atkins-Bittner</span> (<span class="p-org org">Google</span>)
     <dt>Suggest an Edit for this Spec:
     <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/css-display-locking-1/Overview.bs">GitHub Editor</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2020 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This spec introduces features for "display locking",

	allowing authors to more easily control when rendering work occurs,
	making large amounts of content more performant.</p>
    <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
(such as HTML and XML)
on screen, on paper, etc. 
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#motivation"><span class="secno">1.1</span> <span class="content">Motivation &amp; Background</span></a>
      <li><a href="#disclaimer"><span class="secno">1.2</span> <span class="content">Disclaimer</span></a>
     </ol>
    <li>
     <a href="#controlling-rendering"><span class="secno">2</span> <span class="content">Controlling Rendering Of A Subtree</span></a>
     <ol class="toc">
      <li><a href="#render-subtree"><span class="secno">2.1</span> <span class="content">Preventing Rendering: the <span class="property">render-subtree</span> property</span></a>
      <li><a href="#contain-intrinsic-size"><span class="secno">2.2</span> <span class="content">Default Sizing: the <span class="property">contain-intrinsic-size</span> property</span></a>
     </ol>
    <li><a href="#examples"><span class="secno">3</span> <span class="content">Examples</span></a>
    <li><a href="#alternatives"><span class="secno">4</span> <span class="content">Alternatives Considered</span></a>
    <li><a href="#priv-sec"><span class="secno">5</span> <span class="content">Privacy &amp; Security Considerations</span></a>
    <li><a href="#footnotes"><span class="secno">6</span> <span class="content">Footnotes</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
     <ol class="toc">
      <li><a href="#document-conventions"><span class="secno"></span> <span class="content"> Document conventions</span></a>
      <li><a href="#conform-classes"><span class="secno"></span> <span class="content"> Conformance classes</span></a>
      <li>
       <a href="#conform-responsible"><span class="secno"></span> <span class="content"> Requirements for Responsible Implementation of CSS</span></a>
       <ol class="toc">
        <li><a href="#conform-partial"><span class="secno"></span> <span class="content"> Partial Implementations</span></a>
        <li><a href="#conform-future-proofing"><span class="secno"></span> <span class="content"> Implementations of Unstable and Proprietary Features</span></a>
        <li><a href="#conform-testing"><span class="secno"></span> <span class="content"> Implementations of CR-level Features</span></a>
       </ol>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>Render Subtree (a.k.a. Display Locking) is a CSS property
designed to allow developers and browsers to easily scale to large amount of content
and control when rendering <a href="#f1">[1]</a> work happens.
More concretely, the goals are:</p>
   <ul>
    <li data-md>
     <p>Avoid rendering work for content not visible to the user</p>
    <li data-md>
     <p>Support user-agent features and all layout algorithms
(e.g. responsive design, flexbox, grid)
for this content</p>
   </ul>
   <p>The following use-cases motivate this work:</p>
   <ul>
    <li data-md>
     <p>Fast display of large HTML documents
(examples: HTML one-page spec;
other long documents)</p>
    <li data-md>
     <p>Deep links and searchability into pages with hidden content
(example: mobile Wikipedia;
scroll-to-text support for collapsed sections)</p>
    <li data-md>
     <p>Scrollers with a large amount of content,
without resorting to virtualization
(examples: Facebook and Twitter feeds,
CodeMirror documents)</p>
   </ul>
   <h3 class="heading settled" data-level="1.1" id="motivation"><span class="secno">1.1. </span><span class="content">Motivation &amp; Background</span><a class="self-link" href="#motivation"></a></h3>
   <p>On the one hand, faster web page loads and interactions
directly improve the user experience of the web.
On the other hand,
web sites each year grow larger and more complex than the last,
in part because they support more and more use cases,
and contain more information,
and the most common UI pattern for the web is scrolling.
This leads to pages with a lot of non-visible (offscreen or hidden) DOM,
and since the DOM presently renders atomically,
it inherently takes more and more time to render on the same machine.</p>
   <p>For these reasons, web developers need ways
to reduce loading and rendering time of web apps that have a lot of non-visible DOM.
Two common techniques are to mark non-visible DOM as "invisible" <a href="#f2">[2]</a>,
or to use virtualization <a href="#f3">[3]</a>.
Browser implementors also want to reduce loading and rendering time of web apps.
Common techniques to do so include adding caching of rendering state <a href="#f4">[4]</a>,
and avoiding rendering work <a href="#f5">[5]</a> for content that is not visible.</p>
   <p>These techniques can work in many cases but have drawbacks and limitations:</p>
   <ul>
    <li data-md>
     <p><a href="#f2">[2]</a> and <a href="#f3">[3]</a> usually means that such content is not available to user-agent features,
such as find-in-page functionality.
Also, content that is merely placed offscreen
may or may not have rendering cost
(it depends on browser heuristics),
which makes the technique unreliable.</p>
    <li data-md>
     <p>Caching intermediate rendering state is hard work,
and often has performance limitations and cliffs
that are not obvious to developers.
Similarly, relying on the browser to avoid rendering
for content that is clipped out or not visible
is sometimes not reliable,
as it’s hard for the browser to efficiently detect what content is not visible
and does not affect visible content in any way.</p>
   </ul>
   <p>Previously adopted web APIs,
in particular the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-contain-2/#propdef-contain" id="ref-for-propdef-contain">contain</a> and <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-will-change-1/#propdef-will-change" id="ref-for-propdef-will-change">will-change</a> CSS properties,
add ways to specify forms of rendering isolation or isolation hints,
with the intention of them being a mechanism for the web developer
to help the browser optimize rendering for the page.</p>
   <p>While these forms of isolation help,
they do not guarantee that isolated content does not need to be rendered at all.
Ideally there would be a way for the developer to specify
that specific parts of the DOM need not be rendered,
and pair that with a guarantee that when later rendered,
it would not invalidate more than a small amount of style, layout, or paint
in the rest of the document.</p>
   <h3 class="heading settled" data-level="1.2" id="disclaimer"><span class="secno">1.2. </span><span class="content">Disclaimer</span><a class="self-link" href="#disclaimer"></a></h3>
   <p>As the proposed features evolve,
several competing API shapes might be considered at the same time,
the decisions on particular behaviors might not be finalized,
and some documentation may be out of date.</p>
   <p>For the latest implemented behavior and API state,
please consult the cheatsheet.</p>
   <p>For behaviors being discussed,
as well as questions and other discussions,
please look over the issues.</p>
   <p>The rest of this document talks about one particular implementation option.
Whether or not this is the final proposed set of features is yet undecided.</p>
   <h2 class="heading settled" data-level="2" id="controlling-rendering"><span class="secno">2. </span><span class="content">Controlling Rendering Of A Subtree</span><a class="self-link" href="#controlling-rendering"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="render-subtree"><span class="secno">2.1. </span><span class="content">Preventing Rendering: the <a class="property" data-link-type="propdesc" href="#propdef-render-subtree" id="ref-for-propdef-render-subtree">render-subtree</a> property</span><a class="self-link" href="#render-subtree"></a></h3>
   <table class="def propdef" data-link-for-hint="render-subtree">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-render-subtree">render-subtree</dfn>
     <tr class="value">
      <th><a href="https://drafts.csswg.org/css-values/#value-defs">Value:</a>
      <td class="prod">normal <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one">|</a> visible <span id="ref-for-comb-one①">|</span> invisible <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-all" id="ref-for-comb-all">&amp;&amp;</a> [ skip-activation <span id="ref-for-comb-one②">|</span> skip-viewport-activation ]<a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a>
     <tr>
      <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">Initial:</a>
      <td>normal
     <tr>
      <th>Applies to:
      <td><a href="https://drafts.csswg.org/css-pseudo/#generated-content" title="Includes ::before and ::after pseudo-elements.">all elements</a>
     <tr>
      <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">Inherited:</a>
      <td>no
     <tr>
      <th><a href="https://drafts.csswg.org/css-values/#percentages">Percentages:</a>
      <td>n/a
     <tr>
      <th><a href="https://drafts.csswg.org/css-cascade/#computed">Computed value:</a>
      <td>as specified
     <tr>
      <th>Canonical order:
      <td>per grammar
     <tr>
      <th><a href="https://drafts.csswg.org/web-animations/#animation-type">Animation type:</a>
      <td>discrete
   </table>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="invisibly-rendered">invisibly rendered</dfn> (unsure if this term is needed,
it just seemed useful for <a class="property" data-link-type="propdesc" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size">contain-intrinsic-size</a>’s intro)</p>
   <h3 class="heading settled" data-level="2.2" id="contain-intrinsic-size"><span class="secno">2.2. </span><span class="content">Default Sizing: the <a class="property" data-link-type="propdesc" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size①">contain-intrinsic-size</a> property</span><a class="self-link" href="#contain-intrinsic-size"></a></h3>
   <table class="def propdef" data-link-for-hint="contain-intrinsic-size">
    <tbody>
     <tr>
      <th>Name:
      <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export id="propdef-contain-intrinsic-size">contain-intrinsic-size</dfn>
     <tr class="value">
      <th><a href="https://drafts.csswg.org/css-values/#value-defs">Value:</a>
      <td class="prod">none <a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#length-value" id="ref-for-length-value" title="Expands to: em | vb | ch | cm | vh | vi | in | ex | vw | ic | pt | px | lh | pc | rem | rlh | vmax | advance measure | vmin | mm | cap | q">&lt;length></a><a data-link-type="grammar" href="https://drafts.csswg.org/css-values-4/#mult-num-range" id="ref-for-mult-num-range">{1,2}</a>
     <tr>
      <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">Initial:</a>
      <td>none
     <tr>
      <th>Applies to:
      <td>elements with <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment">size containment</a>
     <tr>
      <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">Inherited:</a>
      <td>no
     <tr>
      <th><a href="https://drafts.csswg.org/css-values/#percentages">Percentages:</a>
      <td>n/a
     <tr>
      <th><a href="https://drafts.csswg.org/css-cascade/#computed">Computed value:</a>
      <td>as specified
     <tr>
      <th>Canonical order:
      <td>per grammar
     <tr>
      <th><a href="https://drafts.csswg.org/web-animations/#animation-type">Animation type:</a>
      <td>discrete
   </table>
   <p>When an element is <a data-link-type="dfn" href="#invisibly-rendered" id="ref-for-invisibly-rendered">invisibly rendered</a>,
one of the side-effects is that it automatically receives <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment①">size containment</a>.
This causes the element to lay out as if it was empty,
meaning that the author would have to provide an explicit size
if they wanted the element to take up space on the page
while it was invisible
(to reduce the amount of relayout when it is finally rendered,
ensure scrollbars show a reasonable offset,
etc).</p>
   <p>However, providing an explicit <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-width" id="ref-for-propdef-width">width</a> and <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-height" id="ref-for-propdef-height">height</a> has side effects:
layout algorithms treat it as a strong signal about what size the element should be
(overriding things like <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-align-3/#propdef-place-self" id="ref-for-propdef-place-self">place-self: stretch</a>),
and when the element is made visible again,
the explicit <span class="property" id="ref-for-propdef-width①">width</span>/<span class="property" id="ref-for-propdef-height①">height</span> has to be removed
for the element to lay out at its natural content size again.</p>
   <p>To avoid these issues,
but still provide a reasonable default layout size for elements with <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment②">size containment</a>,
the <a class="property" data-link-type="propdesc" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size②">contain-intrinsic-size</a> property overrides the normal methods
of determining an element’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing-3/#dfn-intrinsic-sizes" id="ref-for-dfn-intrinsic-sizes">intrinsic sizes</a>.
Values are defined as:</p>
   <dl>
    <dt data-md><dfn class="css" data-dfn-for="contain-intrinsic-size" data-dfn-type="value" data-export id="valdef-contain-intrinsic-size-none">none<a class="self-link" href="#valdef-contain-intrinsic-size-none"></a></dfn>
    <dd data-md>
     <p>No effect;
the element is sized as usual.</p>
    <dt data-md><a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#length-value" id="ref-for-length-value①" title="Expands to: em | vb | ch | cm | vh | vi | in | ex | vw | ic | pt | px | lh | pc | rem | rlh | vmax | advance measure | vmin | mm | cap | q">&lt;length></a>{1,2}
    <dd data-md>
     <p>If the element is not under <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment③">size containment</a>,
this value has no effect.</p>
     <p>Otherwise,
the first <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#length-value" id="ref-for-length-value②" title="Expands to: em | vb | ch | cm | vh | vi | in | ex | vw | ic | pt | px | lh | pc | rem | rlh | vmax | advance measure | vmin | mm | cap | q">&lt;length></a> specifies the <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing-3/#min-content-block-size" id="ref-for-min-content-block-size">min-content block size</a> and <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing-3/#max-content-block-size" id="ref-for-max-content-block-size">max-content block size</a> of the element’s <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-3/#principal-box" id="ref-for-principal-box">principal box</a>,
and the second specifies the <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing-3/#min-content-inline-size" id="ref-for-min-content-inline-size">min-content inline size</a> and <a data-link-type="dfn" href="https://drafts.csswg.org/css-sizing-3/#max-content-inline-size" id="ref-for-max-content-inline-size">max-content inline size</a> of the element’s <span id="ref-for-principal-box①">principal box</span>.</p>
     <p>If one <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#length-value" id="ref-for-length-value③" title="Expands to: em | vb | ch | cm | vh | vi | in | ex | vw | ic | pt | px | lh | pc | rem | rlh | vmax | advance measure | vmin | mm | cap | q">&lt;length></a> is provided,
the second defaults to the same <span class="production" id="ref-for-length-value④" title="Expands to: em | vb | ch | cm | vh | vi | in | ex | vw | ic | pt | px | lh | pc | rem | rlh | vmax | advance measure | vmin | mm | cap | q">&lt;length></span>.</p>
   </dl>
   <p>See also the <a href="https://github.com/WICG/display-locking/blob/master/explainer-contain-intrinsic-size.md">explainer for this property</a> for more information on why it exists.</p>
   <p class="issue" id="issue-f3bc9014"><a class="self-link" href="#issue-f3bc9014"></a> TODO provide example of using this with render-subtree</p>
   <p class="issue" id="issue-b3245f4e"><a class="self-link" href="#issue-b3245f4e"></a> TODO provide example of using this for async-loaded content to avoid major layout shifts</p>
   <h2 class="heading settled" data-level="3" id="examples"><span class="secno">3. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
   <div class="example" id="example-41247658">
    <a class="self-link" href="#example-41247658"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>.</c-><c- nc>locked</c-> <c- p>{</c->
  <c- n>render-subtree</c-><c- p>:</c-> <c- n>invisible</c-><c- p>;</c->
  <c- n>contain-intrinsic-size</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>locked</c-><c- p>></c->
  ... some content goes here ...
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
    <p>The .locked element’s <a class="property" data-link-type="propdesc" href="#propdef-render-subtree" id="ref-for-propdef-render-subtree①">render-subtree</a> configuration
	lets the user-agent manage rendering the subtree of the element.
	Specifically when this element is near the viewport,
	the user-agent will begin rendering the element.
	When the element moves away from the viewport,
	it will stop being rendered.</p>
    <p>Recall that when not rendered,
	the property also applies <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment④">size containment</a> to the element.
	This means that when not rendered,
	the element will use the specified <a class="property" data-link-type="propdesc" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size③">contain-intrinsic-size</a>,
	making the element layout as if it had a single block child with 100px width and 200px height.
	This ensures that the element still occupies space when not rendered.
	At the same time,
	it lets the element size to its true contents when the subtree is rendered
	(since <span id="ref-for-size-containment⑤">size containment</span> no longer applies),
	thus removing the concern that estimates like 100x200 are sometimes inaccurate
	(which would otherwise result in displaying incorrect layout for on-screen content).</p>
   </div>
   <div class="example" id="example-132a6590">
    <a class="self-link" href="#example-132a6590"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>.</c-><c- nc>locked</c-> <c- p>{</c->
  <c- n>render-subtree</c-><c- p>:</c-> <c- n>invisible</c-> <c- n>skip-activation</c-><c- p>;</c->
  <c- n>contain-intrinsic-size</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>locked</c-><c- p>></c->
  ... some content goes here ...
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
    <p>In this case, the rendering of the subtree is managed by the developer only.
	This means that if script does not modify the value,
	the element’s subtree will remain unrendered,
	and it will use the <a class="property" data-link-type="propdesc" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size④">contain-intrinsic-size</a> input when deciding how to size the element.</p>
   </div>
   <div class="example" id="example-959c42f1">
    <a class="self-link" href="#example-959c42f1"></a> 
<pre class="highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>.</c-><c- nc>locked</c-> <c- p>{</c->
  <c- n>render-subtree</c-><c- p>:</c-> <c- n>invisible</c-> <c- n>skip-viewport-activation</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>locked</c-><c- p>></c->
  ... some content goes here ...
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
    <p>Similar to above, the render of the subtree is managed by the developer.
	However, it allows find-in-page to search for text within the subtree
	and fire the activation signal if the active match is found.</p>
    <p>The intended effect of this configuration
	is that the subtree is hidden and "collapsed"
	(note the absense of <a class="property" data-link-type="propdesc" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size⑤">contain-intrinsic-size</a> which means that <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#size-containment" id="ref-for-size-containment⑥">size containment</a> will cause the element to act as if it’s empty).
	This is common when content is paginated
	and the developer allows the user to expand certain sections with button clicks.
	In the <a class="property" data-link-type="propdesc" href="#propdef-render-subtree" id="ref-for-propdef-render-subtree②">render-subtree</a> case the developer may also listen to the activation event
	and start rendering the subtree when the event targets the element in the subtree.
	This means that find-in-page is able to expand an otherwise collapsed section
	when it finds a match.</p>
   </div>
   <h2 class="heading settled" data-level="4" id="alternatives"><span class="secno">4. </span><span class="content">Alternatives Considered</span><a class="self-link" href="#alternatives"></a></h2>
   <p>The <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-display-3/#propdef-display" id="ref-for-propdef-display">display: none</a> CSS property causes content subtrees not to render.
However, there is no mechanism for user-agent features to cause these subtrees to render.
Additionally, the cost of hiding and showing content cannot be eliminated
since <span class="css" id="ref-for-propdef-display①">display: none</span> does not preserve the layout state of the subtree.</p>
   <p><a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visufx.html#propdef-visibility" id="ref-for-propdef-visibility">visibility: hidden</a> causes subtrees to not paint,
but they still need style and layout,
as the subtree takes up layout space
and descendants may be <span class="css" id="ref-for-propdef-visibility①">visibility: visible</span>.
Second, there is no mechanism for user-agent features to cause subtrees to render.
Note that with sufficient containment and intersection observer,
the functionality provided by <a class="property" data-link-type="propdesc" href="#propdef-render-subtree" id="ref-for-propdef-render-subtree③">render-subtree</a> may be mimicked with some exceptions:
find-in-page functionality does not work in unrendered content;
this relies on more browser heuristics to ensure contained invisible content is cheap—<wbr><span class="property" id="ref-for-propdef-render-subtree④">render-subtree</span> is a stronger signal to the user-agent that work should be skipped.</p>
   <p>Similar to <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visufx.html#propdef-visibility" id="ref-for-propdef-visibility②">visibility: hidden</a>, <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-contain-2/#propdef-contain" id="ref-for-propdef-contain①">contain: strict</a> allows the browser
to automatically detect subtrees that are definitely offscreen,
and therefore that don’t need to be rendered.
However, <span class="css" id="ref-for-propdef-contain②">contain: strict</span> is not flexible enough
to allow for responsive design layouts
that grow elements to fit their content.
To work around this,
content could be marked as <span class="css" id="ref-for-propdef-contain③">contain: strict</span> when offscreen
and then some other value when on-screen
(this is similar to <a class="property" data-link-type="propdesc" href="#propdef-render-subtree" id="ref-for-propdef-render-subtree⑤">render-subtree</a>).
Second, <span class="css" id="ref-for-propdef-contain④">contain: strict</span> may or may not result in rendering work,
depending on whether the browser detects the content is actually offscreen.
Third, it does not support user-agent features
in cases when it is not actually rendered to the user in the current application view.</p>
   <h2 class="heading settled" data-level="5" id="priv-sec"><span class="secno">5. </span><span class="content">Privacy &amp; Security Considerations</span><a class="self-link" href="#priv-sec"></a></h2>
   <p>tbd</p>
   <h2 class="heading settled" data-level="6" id="footnotes"><span class="secno">6. </span><span class="content">Footnotes</span><a class="self-link" href="#footnotes"></a></h2>
   <p id="f1">[1]: Meaning, the rendering part of the browser event loop. </p>
   <p id="f2">[2]: Examples:
placing <span class="css">display:none</span> CSS on DOM subtrees,
or by placing content far offscreen via tricks like <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-box-3/#propdef-margin-left" id="ref-for-propdef-margin-left">margin-left: -10000px</a> </p>
   <p id="f3">[3]: In this context,
virtualization means representing content outside of the DOM,
and inserting it into the DOM only when visible.
This is most commonly used for virtual or infinite scrollers. </p>
   <p id="f4">[4]: Examples:
caching the computed style of DOM elements,
the output of text / block layout,
and display list output of paint. </p>
   <p id="f5">[5]: Examples:
detecting elements that are clipped out by ancestors,
or not visible in the viewport,
and avoiding some or most rendering lifecycle phases for such content. </p>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
  <h3 class="heading settled" id="document-conventions"><span class="content"> Document conventions</span><a class="self-link" href="#document-conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
	descriptive assertions and RFC 2119 terminology. The key words “MUST”,
	“MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
	“RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
	document are to be interpreted as described in RFC 2119.
	However, for readability, these words do not appear in all uppercase
	letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
	explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
  <p>Examples in this specification are introduced with the words “for example”
	or are set apart from the normative text with <code>class="example"</code>,
	like this: </p>
  <div class="example" id="example-ae2b6bc0">
   <a class="self-link" href="#example-ae2b6bc0"></a> 
   <p>This is an example of an informative example. </p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
	normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note. </p>
  <p>Advisements are normative sections styled to evoke special attention and are
	set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
	this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong> </p>
  <h3 class="heading settled" id="conform-classes"><span class="content"> Conformance classes</span><a class="self-link" href="#conform-classes"></a></h3>
  <p>Conformance to this specification
	is defined for three conformance classes: </p>
  <dl>
   <dt>style sheet 
   <dd>A <a href="http://www.w3.org/TR/CSS2/conform.html#style-sheet">CSS
			style sheet</a>. 
   <dt>renderer 
   <dd>A <a href="http://www.w3.org/TR/CSS2/conform.html#user-agent">UA</a> that interprets the semantics of a style sheet and renders
			documents that use them. 
   <dt>authoring tool 
   <dd>A <a href="http://www.w3.org/TR/CSS2/conform.html#user-agent">UA</a> that writes a style sheet. 
  </dl>
  <p>A style sheet is conformant to this specification
	if all of its statements that use syntax defined in this module are valid
	according to the generic CSS grammar and the individual grammars of each
	feature defined in this module. </p>
  <p>A renderer is conformant to this specification
	if, in addition to interpreting the style sheet as defined by the
	appropriate specifications, it supports all the features defined
	by this specification by parsing them correctly
	and rendering the document accordingly. However, the inability of a
	UA to correctly render a document due to limitations of the device
	does not make the UA non-conformant. (For example, a UA is not
	required to render color on a monochrome monitor.) </p>
  <p>An authoring tool is conformant to this specification
	if it writes style sheets that are syntactically correct according to the
	generic CSS grammar and the individual grammars of each feature in
	this module, and meet all other conformance requirements of style sheets
	as described in this module. </p>
  <h3 class="heading settled" id="conform-responsible"><span class="content"> Requirements for Responsible Implementation of CSS</span><a class="self-link" href="#conform-responsible"></a></h3>
  <p>The following sections define several conformance requirements
		for implementing CSS responsibly,
		in a way that promotes interoperability in the present and future. </p>
  <h4 class="heading settled" id="conform-partial"><span class="content"> Partial Implementations</span><a class="self-link" href="#conform-partial"></a></h4>
  <p>So that authors can exploit the forward-compatible parsing rules to assign fallback values, <strong>CSS renderers <em>must</em> treat as invalid
		(and <a href="http://www.w3.org/TR/CSS2/conform.html#ignore">ignore as appropriate</a>)
		any at-rules, properties, property values, keywords, and other syntactic constructs
		for which they have no usable level of support</strong>.
		In particular, user agents <em>must not</em> selectively ignore
		unsupported property values and honor supported values in a single multi-value property declaration:
		if any value is considered invalid (as unsupported values must be),
		CSS requires that the entire declaration be ignored. </p>
  <h4 class="heading settled" id="conform-future-proofing"><span class="content"> Implementations of Unstable and Proprietary Features</span><a class="self-link" href="#conform-future-proofing"></a></h4>
  <p>To avoid clashes with future stable CSS features,
		the CSSWG recommends <a href="http://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the implementation of <a href="http://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a href="http://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
  <h4 class="heading settled" id="conform-testing"><span class="content"> Implementations of CR-level Features</span><a class="self-link" href="#conform-testing"></a></h4>
  <p>Once a specification reaches the Candidate Recommendation stage,
		implementers should release an <a data-link-type="dfn" href="http://www.w3.org/TR/CSS/#vendor-prefix">unprefixed</a> implementation
		of any CR-level feature they can demonstrate
		to be correctly implemented according to spec,
		and should avoid exposing a prefixed variant of that feature. </p>
  <p>To establish and maintain the interoperability of CSS across
		implementations, the CSS Working Group requests that non-experimental
		CSS renderers submit an implementation report (and, if necessary, the
		testcases used for that implementation report) to the W3C before
		releasing an unprefixed implementation of any CSS features. Testcases
		submitted to W3C are subject to review and correction by the CSS
		Working Group. </p>
  <p>
   Further information on submitting testcases and implementation reports
		can be found from on the CSS Working Group’s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
		Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list. 
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  </p>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#propdef-contain-intrinsic-size">contain-intrinsic-size</a><span>, in §2.2</span>
   <li><a href="#invisibly-rendered">invisibly rendered</a><span>, in §2.1</span>
   <li><a href="#valdef-contain-intrinsic-size-none">none</a><span>, in §2.2</span>
   <li><a href="#propdef-render-subtree">render-subtree</a><span>, in §2.1</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-propdef-place-self">
   <a href="https://drafts.csswg.org/css-align-3/#propdef-place-self">https://drafts.csswg.org/css-align-3/#propdef-place-self</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-place-self">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-margin-left">
   <a href="https://drafts.csswg.org/css-box-3/#propdef-margin-left">https://drafts.csswg.org/css-box-3/#propdef-margin-left</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-margin-left">6. Footnotes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-contain">
   <a href="https://drafts.csswg.org/css-contain-2/#propdef-contain">https://drafts.csswg.org/css-contain-2/#propdef-contain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-contain">1.1. Motivation &amp; Background</a>
    <li><a href="#ref-for-propdef-contain①">4. Alternatives Considered</a> <a href="#ref-for-propdef-contain②">(2)</a> <a href="#ref-for-propdef-contain③">(3)</a> <a href="#ref-for-propdef-contain④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-size-containment">
   <a href="https://drafts.csswg.org/css-contain-2/#size-containment">https://drafts.csswg.org/css-contain-2/#size-containment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-size-containment">2.2. Default Sizing: the contain-intrinsic-size property</a> <a href="#ref-for-size-containment①">(2)</a> <a href="#ref-for-size-containment②">(3)</a> <a href="#ref-for-size-containment③">(4)</a>
    <li><a href="#ref-for-size-containment④">3. Examples</a> <a href="#ref-for-size-containment⑤">(2)</a> <a href="#ref-for-size-containment⑥">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-display">
   <a href="https://drafts.csswg.org/css-display-3/#propdef-display">https://drafts.csswg.org/css-display-3/#propdef-display</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-display">4. Alternatives Considered</a> <a href="#ref-for-propdef-display①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-principal-box">
   <a href="https://drafts.csswg.org/css-display-3/#principal-box">https://drafts.csswg.org/css-display-3/#principal-box</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-principal-box">2.2. Default Sizing: the contain-intrinsic-size property</a> <a href="#ref-for-principal-box①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-intrinsic-sizes">
   <a href="https://drafts.csswg.org/css-sizing-3/#dfn-intrinsic-sizes">https://drafts.csswg.org/css-sizing-3/#dfn-intrinsic-sizes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-intrinsic-sizes">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-max-content-block-size">
   <a href="https://drafts.csswg.org/css-sizing-3/#max-content-block-size">https://drafts.csswg.org/css-sizing-3/#max-content-block-size</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-max-content-block-size">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-max-content-inline-size">
   <a href="https://drafts.csswg.org/css-sizing-3/#max-content-inline-size">https://drafts.csswg.org/css-sizing-3/#max-content-inline-size</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-max-content-inline-size">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-min-content-block-size">
   <a href="https://drafts.csswg.org/css-sizing-3/#min-content-block-size">https://drafts.csswg.org/css-sizing-3/#min-content-block-size</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-min-content-block-size">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-min-content-inline-size">
   <a href="https://drafts.csswg.org/css-sizing-3/#min-content-inline-size">https://drafts.csswg.org/css-sizing-3/#min-content-inline-size</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-min-content-inline-size">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-length-value">
   <a href="https://drafts.csswg.org/css-values-3/#length-value">https://drafts.csswg.org/css-values-3/#length-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-length-value">2.2. Default Sizing: the contain-intrinsic-size property</a> <a href="#ref-for-length-value①">(2)</a> <a href="#ref-for-length-value②">(3)</a> <a href="#ref-for-length-value③">(4)</a> <a href="#ref-for-length-value④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-comb-all">
   <a href="https://drafts.csswg.org/css-values-4/#comb-all">https://drafts.csswg.org/css-values-4/#comb-all</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-comb-all">2.1. Preventing Rendering: the render-subtree property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-mult-opt">
   <a href="https://drafts.csswg.org/css-values-4/#mult-opt">https://drafts.csswg.org/css-values-4/#mult-opt</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-mult-opt">2.1. Preventing Rendering: the render-subtree property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-mult-num-range">
   <a href="https://drafts.csswg.org/css-values-4/#mult-num-range">https://drafts.csswg.org/css-values-4/#mult-num-range</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-mult-num-range">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-comb-one">
   <a href="https://drafts.csswg.org/css-values-4/#comb-one">https://drafts.csswg.org/css-values-4/#comb-one</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-comb-one">2.1. Preventing Rendering: the render-subtree property</a> <a href="#ref-for-comb-one①">(2)</a> <a href="#ref-for-comb-one②">(3)</a>
    <li><a href="#ref-for-comb-one③">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-will-change">
   <a href="https://drafts.csswg.org/css-will-change-1/#propdef-will-change">https://drafts.csswg.org/css-will-change-1/#propdef-will-change</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-will-change">1.1. Motivation &amp; Background</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-height">
   <a href="https://drafts.csswg.org/css2/visudet.html#propdef-height">https://drafts.csswg.org/css2/visudet.html#propdef-height</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-height">2.2. Default Sizing: the contain-intrinsic-size property</a> <a href="#ref-for-propdef-height①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-visibility">
   <a href="https://drafts.csswg.org/css2/visufx.html#propdef-visibility">https://drafts.csswg.org/css2/visufx.html#propdef-visibility</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-visibility">4. Alternatives Considered</a> <a href="#ref-for-propdef-visibility①">(2)</a> <a href="#ref-for-propdef-visibility②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-width">
   <a href="https://drafts.csswg.org/css2/visudet.html#propdef-width">https://drafts.csswg.org/css2/visudet.html#propdef-width</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-width">2.2. Default Sizing: the contain-intrinsic-size property</a> <a href="#ref-for-propdef-width①">(2)</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[css-align-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-place-self" style="color:initial">place-self</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-box-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-margin-left" style="color:initial">margin-left</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-contain-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-contain" style="color:initial">contain</span>
     <li><span class="dfn-paneled" id="term-for-size-containment" style="color:initial">size containment</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-display-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-display" style="color:initial">display</span>
     <li><span class="dfn-paneled" id="term-for-principal-box" style="color:initial">principal box</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-sizing-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-intrinsic-sizes" style="color:initial">intrinsic sizes</span>
     <li><span class="dfn-paneled" id="term-for-max-content-block-size" style="color:initial">max-content block size</span>
     <li><span class="dfn-paneled" id="term-for-max-content-inline-size" style="color:initial">max-content inline size</span>
     <li><span class="dfn-paneled" id="term-for-min-content-block-size" style="color:initial">min-content block size</span>
     <li><span class="dfn-paneled" id="term-for-min-content-inline-size" style="color:initial">min-content inline size</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-values-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-length-value" style="color:initial">&lt;length></span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-values-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-comb-all" style="color:initial">&amp;&amp;</span>
     <li><span class="dfn-paneled" id="term-for-mult-opt" style="color:initial">?</span>
     <li><span class="dfn-paneled" id="term-for-mult-num-range" style="color:initial">{a,b}</span>
     <li><span class="dfn-paneled" id="term-for-comb-one" style="color:initial">|</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-will-change-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-will-change" style="color:initial">will-change</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-height" style="color:initial">height</span>
     <li><span class="dfn-paneled" id="term-for-propdef-visibility" style="color:initial">visibility</span>
     <li><span class="dfn-paneled" id="term-for-propdef-width" style="color:initial">width</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-align-3">[CSS-ALIGN-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-align-3/">CSS Box Alignment Module Level 3</a>. 6 December 2018. WD. URL: <a href="https://www.w3.org/TR/css-align-3/">https://www.w3.org/TR/css-align-3/</a>
   <dt id="biblio-css-box-3">[CSS-BOX-3]
   <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-3/">CSS Box Model Module Level 3</a>. 18 December 2018. WD. URL: <a href="https://www.w3.org/TR/css-box-3/">https://www.w3.org/TR/css-box-3/</a>
   <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
   <dd>Tab Atkins Jr.; Florian Rivoal. <a href="https://www.w3.org/TR/css-contain-2/">CSS Containment Module Level 2</a>. 11 November 2019. WD. URL: <a href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
   <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>. 11 July 2019. CR. URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
   <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/">CSS Intrinsic &amp; Extrinsic Sizing Module Level 3</a>. 22 May 2019. WD. URL: <a href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/">CSS Values and Units Module Level 3</a>. 6 June 2019. CR. URL: <a href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/">CSS Values and Units Module Level 4</a>. 31 January 2019. WD. URL: <a href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
   <dt id="biblio-css-will-change-1">[CSS-WILL-CHANGE-1]
   <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-will-change-1/">CSS Will Change Module Level 1</a>. 3 December 2015. CR. URL: <a href="https://www.w3.org/TR/css-will-change-1/">https://www.w3.org/TR/css-will-change-1/</a>
   <dt id="biblio-css2">[CSS2]
   <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS2/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. REC. URL: <a href="https://www.w3.org/TR/CSS2/">https://www.w3.org/TR/CSS2/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a class="self-link" href="#property-index"></a></h2>
  <div class="big-element-wrapper">
   <table class="index">
    <thead>
     <tr>
      <th scope="col">Name
      <th scope="col">Value
      <th scope="col">Initial
      <th scope="col">Applies to
      <th scope="col">Inh.
      <th scope="col">%ages
      <th scope="col">Anim­ation type
      <th scope="col">Canonical order
      <th scope="col">Com­puted value
    <tbody>
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-contain-intrinsic-size" id="ref-for-propdef-contain-intrinsic-size⑥">contain-intrinsic-size</a>
      <td>none | &lt;length>{1,2}
      <td>none
      <td>elements with size containment
      <td>no
      <td>n/a
      <td>discrete
      <td>per grammar
      <td>as specified
     <tr>
      <th scope="row"><a class="css" data-link-type="property" href="#propdef-render-subtree" id="ref-for-propdef-render-subtree⑥">render-subtree</a>
      <td>normal | visible | invisible &amp;&amp; [ skip-activation | skip-viewport-activation ]?
      <td>normal
      <td>all elements
      <td>no
      <td>n/a
      <td>discrete
      <td>per grammar
      <td>as specified
   </table>
  </div>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> TODO provide example of using this with render-subtree<a href="#issue-f3bc9014"> ↵ </a></div>
   <div class="issue"> TODO provide example of using this for async-loaded content to avoid major layout shifts<a href="#issue-b3245f4e"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="propdef-render-subtree">
   <b><a href="#propdef-render-subtree">#propdef-render-subtree</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-render-subtree">2.1. Preventing Rendering: the render-subtree property</a>
    <li><a href="#ref-for-propdef-render-subtree①">3. Examples</a> <a href="#ref-for-propdef-render-subtree②">(2)</a>
    <li><a href="#ref-for-propdef-render-subtree③">4. Alternatives Considered</a> <a href="#ref-for-propdef-render-subtree④">(2)</a> <a href="#ref-for-propdef-render-subtree⑤">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="invisibly-rendered">
   <b><a href="#invisibly-rendered">#invisibly-rendered</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invisibly-rendered">2.2. Default Sizing: the contain-intrinsic-size property</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="propdef-contain-intrinsic-size">
   <b><a href="#propdef-contain-intrinsic-size">#propdef-contain-intrinsic-size</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-contain-intrinsic-size">2.1. Preventing Rendering: the render-subtree property</a>
    <li><a href="#ref-for-propdef-contain-intrinsic-size①">2.2. Default Sizing: the contain-intrinsic-size property</a> <a href="#ref-for-propdef-contain-intrinsic-size②">(2)</a>
    <li><a href="#ref-for-propdef-contain-intrinsic-size③">3. Examples</a> <a href="#ref-for-propdef-contain-intrinsic-size④">(2)</a> <a href="#ref-for-propdef-contain-intrinsic-size⑤">(3)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>